<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js ie6 oldie" lang="en"><![endif]-->
<!--[if IE 7]><html class="no-js ie7 oldie" lang="en"><![endif]-->
<!--[if IE 8]><html class="no-js ie8 oldie" lang="en"><![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
	<meta charset="utf-8">
	<title>Legwork Studio / Creativity. Innovation. DIY Ethic. / HTML5 Rocks - Creating Roll It.</title>

	<link href="../fonts/Museo_Slab_700.css" media="all" rel="stylesheet" type="text/css">
	<link href="main.css" medial="all" rel="stylesheet" type="text/css" />

	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
	<script type="text/javascript">(function(){var d=window,e=document,f="documentElement",g="scrollTop",k="prototype",l="body",m="getAttribute",n="",p="1",q="data",r="img",s="load",t="number",u="on",v="onload",w="pagespeed_lazy_position",x="pagespeed_lazy_replaced_functions",y="pagespeed_lazy_src",z="position",A="relative",B="resize",C="scroll",D="src";d.pagespeed=d.pagespeed||{};var E=d.pagespeed,F=function(a){this.d=[];this.a=0;this.b=!1;this.o=a;this.e=null;this.i=0;this.j=200;this.c=!1};
	F[k].s=function(){var a=0;typeof d.pageYOffset==t?a=d.pageYOffset:e[l]&&e[l][g]?a=e[l][g]:e[f]&&e[f][g]&&(a=e[f][g]);var b=d.innerHeight||e[f].clientHeight||e[l].clientHeight;return{top:a,bottom:a+b,height:b}};F[k].n=function(a){var b=a[m](w);if(b)return parseInt(b,0);var b=a.offsetTop,c=a.offsetParent;c&&(b+=this.n(c));b=Math.max(b,0);a.setAttribute(w,b);return b};F[k].r=function(a){var b=this.n(a);return{top:b,bottom:b+a.offsetHeight}};
	F[k].q=function(a,b){if(a.currentStyle)return a.currentStyle[b];if(e.defaultView&&e.defaultView.getComputedStyle){var c=e.defaultView.getComputedStyle(a,null);if(c)return c.getPropertyValue(b)}return a.style&&a.style[b]?a.style[b]:n};F[k].p=function(a){if(!this.c&&(0==a.offsetHeight||0==a.offsetWidth))return!1;if(this.q(a,z)==A)return!0;var b=this.s(),c=a.getBoundingClientRect();c?(a=c.top-b.height,b=c.bottom):(c=this.r(a),a=c.top-b.bottom,b=c.bottom-b.top);return a<=this.a&&0<=b+this.a};
	F[k].m=function(a){this.l(a);var b=this;d.setTimeout(function(){var c=a[m](y);if(null!=c)if((b.b||b.p(a))&&-1!=a.src.indexOf(b.o)){var h=a.parentNode,G=a.nextSibling;h&&h.removeChild(a);a.getAttribute=a.k;a.removeAttribute(v);a.removeAttribute(y);a.removeAttribute(x);h&&h.insertBefore(a,G);a.src=c}else b.d.push(a)},0)};F[k].loadIfVisible=F[k].m;F[k].u=function(){this.b=!0;this.f()};F[k].loadAllImages=F[k].u;F[k].f=function(){var a=this.d,b=a.length;this.d=[];for(var c=0;c<b;++c)this.m(a[c])};
	F[k].h=function(a,b){return a.a?null!=a.a(b):null!=a[m](b)};F[k].v=function(){for(var a=e.getElementsByTagName(r),b=0;b<a.length;++b){var c=a[b];this.h(c,y)&&this.l(c)}};F[k].overrideAttributeFunctions=F[k].v;F[k].l=function(a){var b=this;this.h(a,x)||(a.k=a[m],a.getAttribute=function(a){a.toLowerCase()==D&&b.h(this,y)&&(a=y);return this.k(a)},a.setAttribute(x,p))};
	E.g=function(a,b,c){if(a.addEventListener)a.addEventListener(b,c,!1);else if(a.attachEvent)a.attachEvent(u+b,c);else{var h=a[u+b];a[u+b]=function(){c.call(this);h&&h.call(this)}}};E.t=function(a,b){var c=new F(b);E.lazyLoadImages=c;E.g(d,s,function(){c.c=!0;c.b=a;c.a=200;c.f()});0!=b.indexOf(q)&&((new Image).src=b);var h=function(){if(!(c.c&&a||c.e)){var b=c.j;(new Date).getTime()-c.i>c.j&&(b=0);c.e=d.setTimeout(function(){c.i=(new Date).getTime();c.f();c.e=null},b)}};E.g(d,C,h);E.g(d,B,h)};
	E.lazyLoadInit=E.t;})();

	pagespeed.lazyLoadInit(false, "//1-ps.googleusercontent.com/h/www.gstatic.com/psa/static/1.gif");
	</script>

	<style type="text/css">.rollit-full{width:100%}.button-download::before{content:url(http://1-ps.googleusercontent.com/x/s.html5rocks-hrd.appspot.com/www.html5rocks.com/static/images/tutorials/casestudies/roll-it/xball-icon.png.pagespeed.ic.08jJDeyQpY.webp);position:absolute;top:50%;margin-top:-8px;left:10px}#physijs-scene{height:400px;background-color:#eee;position:relative;cursor:pointer}#physijs-scene.no-webgl{height:auto;cursor:default}#antialiasing{height:600px;background-color:#eee;position:relative}#antialiasing.no-webgl{height:auto}#scene{transition:background-color .4s;-webkit-transition:background-color .4s;height:200px;background-color:#eee;position:relative}#scene.no-accel{height:auto}#scene.roll{background-color:#ffcf49}#divider{position:absolute;height:4px;background:#222;top:50%;margin-top:-2px;width:100%}#swing-up{position:absolute;background:#15b05d;width:100px;margin-left:-50px;height:0;bottom:50%;left:50%;overflow:hidden}#swing-up span{position:absolute;top:6px;display:block;width:100%;text-align:center;font-weight:bold;color:#fff}#swing-down{position:absolute;background:#be3d28;width:100px;margin-left:-50px;height:0;top:50%;left:50%;overflow:hidden}#swing-down span{position:absolute;bottom:6px;display:block;width:100%;text-align:center;font-weight:bold;color:#fff}#roll-menu{height:200px;background-color:#eee;position:relative}#ball-track{position:absolute;bottom:0;left:50%;margin-left:-39px}#ball{position:absolute;bottom:0;display:block;width:77px;height:77px}#floor{position:absolute;background-color:#000;height:5px;width:100%;bottom:-5px}</style>

	<script type="text/javascript" src="http://www.html5rocks.com/static/demos/roll-it/js/three.min.js"></script>
	<script type="text/javascript" src="http://www.html5rocks.com/static/demos/roll-it/js/physijs/physi.js"></script>

</head>
<body>

<div id="wrapper">
	<div id="wrapper-inner">
		<article class="tutorial pattern-bg-lighter">
			<section>
				<h2>Creating Roll It</h2>
				<p><a href="http://g.co/rollit" target="_blank">Roll It</a> is a <a href="http://www.chromeexperiments.com/" target="_blank">Chrome Experiment</a> that reimagines a classic boardwalk game using only the browser on your phone and computer. The browser on your phone lets you aim and roll the ball with a flick of your wrist, while the browser on your computer renders the real time graphics of the Roll It alley with WebGL and Canvas. The two devices communicate via Websockets. No apps. No downloads. No tokens. All you need is a modern browser.</p>
				<p>With Google Creative Lab's direction, <a href="http://www.legworkstudio.com/" target="_blank">Legwork</a> developed the user experience, interfaces and game environment, then teamed up with development partner, <a href="http://modeset.com/" target="_blank">Mode Set</a>, to build Roll It. Over the duration of the project there were a number of unique challenges. This article walks through some of the techniques we used, tricks we discovered and lessons we learned while bringing Roll It to fruition.</p>
				<h2 id="toc-3d-workflow">3D Workflow</h2>
				<p>One of the struggles in the beginning was figuring out the best way to bring 3D models from our software to a web ready file format. After creating the assets inside <a href="http://en.wikipedia.org/wiki/Cinema_4D" target="_blank">Cinema 4D</a>, the models were simplified and converted to low-polygon meshes. Each mesh was given certain polygon selection tags to differentiate between parts of the object for coloring and texturing. We were then able to export as a Collada 1.5 (.dae) file and import into <a href="http://www.blender.org/" target="_blank">Blender</a>, an open source 3D program, in order to make compatible files for three.js. Once we ensured our models were imported correctly, we exported the mesh as a .json file and the lighting was applied using code. Here's a more detailed look at the steps we took:</p>
				<p>
				</p><figure>
				<img class="rollit-full" width="640" height="360" src="http://1-ps.googleusercontent.com/x/s.html5rocks-hrd.appspot.com/www.html5rocks.com/static/images/tutorials/casestudies/roll-it/x01_C4D_model.jpg.pagespeed.ic.RqfC1pP4Fa.webp">
				<figcaption>Model the object inside C4D. Make sure the mesh normals are facing outwards. </figcaption>
				</figure>
				<p></p>
				<p>
				</p><figure>
				<img class="rollit-full" width="640" height="360" src="http://1-ps.googleusercontent.com/x/s.html5rocks-hrd.appspot.com/www.html5rocks.com/static/images/tutorials/casestudies/roll-it/x02_C4D_texture.jpg.pagespeed.ic.c0dYfOqHGv.webp">
				<figcaption>Using the polygon selection tool, create selection tags of the specific areas you wish to texture. Apply materials to each of the selection tags. </figcaption>
				</figure>
				<p></p>
				<p>
				</p><figure>
				<img src="http://www.html5rocks.com/static/images/tutorials/casestudies/roll-it/03_Collada_export.jpg">
				<figcaption>Export your mesh as a COLLADA 1.5 .dae file.</figcaption>
				</figure>
				<p></p>
				<p>
				</p><figure>
				<img pagespeed_lazy_src="http://1-ps.googleusercontent.com/x/s.html5rocks-hrd.appspot.com/www.html5rocks.com/static/images/tutorials/casestudies/roll-it/x04_Collada_export_dialog_box.jpg.pagespeed.ic.dWGltJ4YjO.webp" width="449" height="409" src="//1-ps.googleusercontent.com/h/www.gstatic.com/psa/static/1.gif" onload="pagespeed.lazyLoadImages.loadIfVisible(this);" pagespeed_lazy_replaced_functions="1">
				<figcaption>Make sure "export 2D geometry" is checked. Exporting triangles is generally more widely supported across 3D environments on the code side, but has the downside of doubling your polygon count. The higher the polygon count, the more taxing the model will be on the computer's processor. So leave this checked off if you see slow performance.</figcaption>
				</figure>
				<p></p>
				<p>
				</p><figure>
				<img pagespeed_lazy_src="http://1-ps.googleusercontent.com/x/s.html5rocks-hrd.appspot.com/www.html5rocks.com/static/images/tutorials/casestudies/roll-it/x05_Blender_import.jpg.pagespeed.ic.ZgFxtL6X_8.webp" width="569" height="582" src="//1-ps.googleusercontent.com/h/www.gstatic.com/psa/static/1.gif" onload="pagespeed.lazyLoadImages.loadIfVisible(this);" pagespeed_lazy_replaced_functions="1">
				<figcaption>Import the Collada file into Blender.</figcaption>
				</figure>
				<p></p>
				<p>
				</p><figure>
				<img pagespeed_lazy_src="http://1-ps.googleusercontent.com/x/s.html5rocks-hrd.appspot.com/www.html5rocks.com/static/images/tutorials/casestudies/roll-it/x06_blender_file.jpg.pagespeed.ic.FcSk_xQsnc.webp" class="rollit-full" width="640" height="360" src="//1-ps.googleusercontent.com/h/www.gstatic.com/psa/static/1.gif" onload="pagespeed.lazyLoadImages.loadIfVisible(this);" pagespeed_lazy_replaced_functions="1">
				<figcaption>Once imported into blender, you will see that your materials and selection tags have carried over as well.</figcaption>
				</figure>
				<p></p>
				<p>
				</p><figure>
				<img pagespeed_lazy_src="http://1-ps.googleusercontent.com/x/s.html5rocks-hrd.appspot.com/www.html5rocks.com/static/images/tutorials/casestudies/roll-it/x07_Blender_materials.jpg.pagespeed.ic.9yKXaw4XlC.webp" width="424" height="682" src="//1-ps.googleusercontent.com/h/www.gstatic.com/psa/static/1.gif" onload="pagespeed.lazyLoadImages.loadIfVisible(this);" pagespeed_lazy_replaced_functions="1">
				<figcaption>Select your object, and adjust the materials of the object to what you prefer.</figcaption>
				</figure>
				<p></p>
				<p>
				</p><figure>
				<img pagespeed_lazy_src="http://1-ps.googleusercontent.com/x/s.html5rocks-hrd.appspot.com/www.html5rocks.com/static/images/tutorials/casestudies/roll-it/x08_Blender_export.jpg.pagespeed.ic.5jFAfdjLzL.webp" width="683" height="579" src="//1-ps.googleusercontent.com/h/www.gstatic.com/psa/static/1.gif" onload="pagespeed.lazyLoadImages.loadIfVisible(this);" pagespeed_lazy_replaced_functions="1">
				<figcaption><a href="https://github.com/mrdoob/three.js/tree/master/utils/exporters/blender" target="_blank">Export the file as a three.js file</a> for webGL compatibility.</figcaption>
				</figure>
				<p></p>
				<p>Here are some demo 3d files for you to play around with:</p>
				<a href="/static/demos/roll-it/roll-it-3d-model-demos.zip" target="_blank" class="button-download">Download the 3D model demos</a>
				<h2 id="toc-writing-the-code">Writing the code</h2>
				<p>Roll It was developed with open source libraries and runs natively in modern browsers. With technologies like WebGL and WebSockets, the web is closing in on console-quality gaming and multimedia experiences. The ease and comfort in which developers can build these experiences has been taking leaps forward as more modern tools have become available for HTML development. </p>
				<h3 id="toc-the-development-environment">The development environment</h3>
				<p>Most of Roll It's original code was written with <a href="http://coffeescript.org/" target="_blank">CoffeeScript</a> - a clean and concise language that transcompiles to well-formed and <a href="http://www.javascriptlint.com/" target="_blank">linted</a> JavaScript. CoffeeScript shines for OOP development with its great inheritance model and cleaner scope handling. The CSS was written with the <a href="http://sass-lang.com/" target="_blank">SASS</a> framework, which gives the developer a number of great tools to enhance and manage a project's stylesheets. Adding these systems to the build process takes a little bit of time to set up, but the payoff is definitely worth it, especially for a larger project like Roll It. We set up a simple <a href="http://rubyonrails.org/" target="_blank">Ruby on Rails</a> server to auto-compile our assets during development, so all of these compilation steps became transparent.</p>
				<p>Beyond creating a streamlined and comfortable coding environment, we manually optimized assets to minimize requests in order to load the site faster. We ran every image through a couple of compression programs - <a href="http://imageoptim.com/" target="_blank">ImageOptim</a> and <a href="http://pngmini.com/" target="_blank">ImageAlpha</a>. Each program optimizes images in their own way - lossless and lossy, respectively. With the right combination of settings, they can significantly cut down an image's file size. This not only saves bandwidth when loading external images, but once optimized, your images will translate into a much smaller base64 encoded strings for inline embedding in HTML, CSS and JavaScript. While on the subject of base64 encoding, we also embedded our <a href="http://www.google.com/fonts/specimen/Open+Sans" target="_blank">Open Sans</a> .woff and .svg font files directly into the CSS using this technique, which resulted in even fewer total requests.</p>
				<h3 id="toc-physics-enabled-3d-scene">The physics-enabled 3D scene</h3>
				<p><a href="http://threejs.org/" target="_blank">THREE.js</a> is the ubiquitous 3D JavaScript library for the web. It wraps up low-level 3D math and hardware-based WebGL optimizations that enable mere mortals to easily create well-lit and beautiful interactive 3D scenes without having to write custom shaders or perform manual matrix transformations. <a href="https://github.com/chandlerprall/Physijs" target="_blank">Physijs</a> is a THREE.js-specific wrapper for a popular C++ physics library that has been translated to JavaScript. We took advantage of this library to simulate the ball rolling, jumping, and bouncing towards its destination in 3D.</p>
				<p>From the start, we set out to not only make the physical experience of rolling the ball feel realistic, but also to make sure that the objects in the game felt real. This required many iterations of adjusting the overall gravity of the Physijs scene, the speed of the ball as it rolls from the player's throw, the slope of the lane's jump, and the friction and restitution (bounciness) properties of the ball and lane materials. The combination of more gravity and more speed resulted in a more realistic gaming experience.</p>
				<p>The following demo explains some of the setup and interaction with a Physijs-enabled scene. If you're familiar with setting up a THREE.js scene, there are only a couple of extra steps to add physics behavior to the objects, launch the ball, and create shapes that build the game board. Make sure WebGL is enabled if you're viewing with Safari and be sure to <a href="/static/demos/roll-it/roll-it-code-demos.zip">download the code examples</a> for these demos.</p><p></p>
				<p>
				</p><div id="physijs-scene"><canvas width="620" height="400" style="width: 620px; height: 400px;"></canvas></div>
				<p></p>
				<script type="text/javascript" pagespeed_no_defer="">pagespeed.lazyLoadImages.overrideAttributeFunctions();</script><script>var vendors=['webkit','moz'];for(var x=0;x<vendors.length&&!window.requestAnimationFrame;++x){window.requestAnimationFrame=window[vendors[x]+'RequestAnimationFrame'];window.cancelAnimationFrame=window[vendors[x]+'CancelAnimationFrame']||window[vendors[x]+'CancelRequestAnimationFrame'];}
				(function(){var container=document.getElementById('physijs-scene');var camera,scene,renderer;var sceneW,sceneH;var physicsMaterial;function init(){sceneW=container.offsetWidth;sceneH=container.offsetHeight;buildPhysicsScene();buildRenderer();buildCamera();buildGround();buildPhysicsMaterial();buildCircles();buildBall();buildLights();}
				var buildRenderer=function(){renderer=new THREE.WebGLRenderer({antialias:true});renderer.setSize(sceneW,sceneH);renderer.setClearColorHex(0xeeeeee);renderer.shadowMapEnabled=true;renderer.shadowMapSoft=true;renderer.shadowMapType=THREE.PCFShadowMap;renderer.shadowMapAutoUpdate=true;container.appendChild(renderer.domElement);};var buildLights=function(){scene.add(new THREE.AmbientLight(0x666666));var light=new THREE.SpotLight(0xcccccc);light.position.set(0,1000,0);light.target.position.copy(scene.position);light.shadowCameraTop=-700;light.shadowCameraLeft=-700;light.shadowCameraRight=700;light.shadowCameraBottom=700;light.shadowCameraNear=20;light.shadowCameraFar=1400;light.shadowBias=-.0001;light.shadowMapWidth=light.shadowMapHeight=1024;light.shadowDarkness=.25;light.castShadow=true;light.shadowCameraVisible=false;scene.add(light);};var buildCamera=function(){camera=new THREE.PerspectiveCamera(50,sceneW/sceneH,1,10000);camera.position.z=900;camera.position.y=400;camera.lookAt(new THREE.Vector3(0,0,0));};var buildPhysicsScene=function(){Physijs.scripts.worker='http://www.html5rocks.com/static/demos/roll-it/js/physijs/physijs_worker.js';Physijs.scripts.ammo='ammo.js';scene=new Physijs.Scene({reportsize:50,fixedTimeStep:1/60});scene.setGravity(new THREE.Vector3(0,-800,0));};var buildGround=function(){var groundGeometry=new THREE.PlaneGeometry(1000,1000,10,10);groundGeometry.computeFaceNormals();groundGeometry.computeVertexNormals();var groundMaterial=Physijs.createMaterial(new THREE.MeshPhongMaterial({color:0x999999,wireframe:false,shininess:10,color:0xdddddd,emissive:0x111111}),.8,.8);var ground=new Physijs.HeightfieldMesh(groundGeometry,groundMaterial,0);ground.rotation.x=-Math.PI/2;ground.receiveShadow=true;ground.castShadow=true;scene.add(ground);};var buildPhysicsMaterial=function(){physicsMaterial=Physijs.createMaterial(new THREE.MeshLambertMaterial({color:0xdddddd,emissive:0x007844,ambient:0x000000,shininess:100,specular:0xcccccc,shading:THREE.SmoothShading}),.8,.8);};var buildPhysicsWall=function(width,height,depth,x,y,z){var physicsMesh,wallGeometry;wallGeometry=new THREE.CubeGeometry(width,height,depth);wallGeometry.computeFaceNormals();wallGeometry.computeVertexNormals();physicsMesh=new Physijs.BoxMesh(wallGeometry,physicsMaterial,0);physicsMesh.castShadow=true;physicsMesh.receiveShadow=true;physicsMesh.position.set(x,y,z);return physicsMesh;};var buildCircleWall=function(radius,arc,circleSegments,x,z,wallH){var curRadians,i,segmentRadians,startRadians,wall,wallW;segmentRadians=(arc*(Math.PI*2))/circleSegments;startRadians=-Math.PI/2;wallW=radius*segmentRadians;i=0;while(i<circleSegments){wall=buildPhysicsWall(wallW,wallH,0.3,0,wallH/2,0);curRadians=startRadians+i*segmentRadians;wall.position.x=x+radius*Math.sin(curRadians);wall.position.z=z+radius*Math.cos(curRadians);wall.rotation.y=curRadians;scene.add(wall);i++;}};var buildCircles=function(){buildCircleWall(60,1,30,-88,-20,20);buildCircleWall(60,1,30,88,-20,20);buildCircleWall(200,0.5,40,0,80,20);buildCircleWall(400,1,40,0,0,70);};var buildBall=function(){var ballCanvas=document.createElement('canvas');ballCanvas.width=64;ballCanvas.height=64;var ballContext=ballCanvas.getContext('2d');ballContext.fillStyle="#f8ae44";ballContext.fillRect(0,0,ballCanvas.width,ballCanvas.height/2);ballContext.fillStyle="#ffda4e";ballContext.fillRect(0,ballCanvas.height/2,ballCanvas.width,ballCanvas.height/2);var ballTexture=new THREE.Texture(ballCanvas);ballTexture.needsUpdate=true;var ballMaterial=Physijs.createMaterial(new THREE.MeshLambertMaterial({map:ballTexture,shininess:10,color:0xdddddd,emissive:0x111111,side:THREE.FrontSide}),.6,.5);ballMaterial.map.wrapS=ballMaterial.map.wrapT=THREE.RepeatWrapping;ballMaterial.map.repeat.set(1,1);ball=new Physijs.SphereMesh(new THREE.SphereGeometry(30,32,32),ballMaterial,100);ball.position.y=500;ball.receiveShadow=true;ball.castShadow=true;scene.add(ball);};var animate=function(){scene.simulate();renderer.render(scene,camera);requestAnimationFrame(animate);}
				var tossBall=function(){var xSpeed=Math.random()*600-300;var zSpeed=Math.random()*600-300;ball.setLinearVelocity(new THREE.Vector3(xSpeed,300,zSpeed));};container.addEventListener('click',tossBall,false);var onWindowResize=function(){sceneW=container.offsetWidth;sceneH=container.offsetHeight;camera.aspect=sceneW/sceneH;camera.updateProjectionMatrix();renderer.setSize(sceneW,sceneH);}
				window.addEventListener('resize',onWindowResize,false);var hasWebGL=(function(){try{return!!window.WebGLRenderingContext&&!!document.createElement('canvas').getContext('experimental-webgl');}catch(e){return false;}})();if(hasWebGL){init();animate();}else{container.innerHTML='<img src="/static/images/tutorials/casestudies/roll-it/need-computer.png" class="rollit-full">';container.classList.add('no-webgl');}})();</script>
				<h3 id="toc-smoothing-it-out">Smoothing it out</h3>
				<p>Most modern browser and video card combinations should take advantage of native hardware-based anti-aliasing in the WebGL environment, but some won't play nice. In the case that anti-aliasing doesn't work natively, any hard and contrasted edges in the THREE.js scene will will be jagged and ugly (to our discerning eyes, at least). </p>
				<p>Luckily there's a fix: through a snippet of code, we can detect whether the platform will natively support antialiasing. If it does, then we're good to go. If it doesn't, there are a series of post-processing shaders that come with THREE.js that can help us. Namely, the FXAA anti-aliasing filter. By redrawing the rendered scene every frame with this shader, we're generally left with a much smoother look to our lines and edges. See the demo below:</p>
				</p>
				<div id="antialiasing"><canvas width="620" height="600" style="width: 620px; height: 600px;"></canvas></div>
				<p>
				<p id="anti-native">Antialiasing is working natively.</p>
				<p id="anti-post">Antialiasing is <span id="en">en</span><span id="dis">dis</span>abled via the FXAA post-processing shader. <input id="post-check" type="checkbox" checked="checked" autocomplete="off"></input></p>

				<script>(function(){var container=document.getElementById('antialiasing');var camera,scene,renderer;var geometry,material,boxSmall,boxLarge,plane;var sceneW,sceneH;var renderScene,effectFXAA,composer,dpr;var nativeAntialiasSupport=false;var isNativeAntialiasing=false;var isPostProcessing=true;function init(){sceneW=container.offsetWidth;sceneH=container.offsetHeight;camera=new THREE.PerspectiveCamera(50,sceneW/sceneH,1,10000);camera.position.z=2000;scene=new THREE.Scene();geometry=new THREE.CubeGeometry(400,400,400);material=new THREE.MeshBasicMaterial({color:0xff0000,wireframe:true,wireframeLinewidth:2});boxSmall=new THREE.Mesh(geometry,material);scene.add(boxSmall);geometry=new THREE.CubeGeometry(800,800,800);material=new THREE.MeshBasicMaterial({color:0x0000ff,wireframe:true,wireframeLinewidth:2});boxLarge=new THREE.Mesh(geometry,material);scene.add(boxLarge);geometry=new THREE.PlaneGeometry(1600,300);material=new THREE.MeshBasicMaterial({color:0x000000,transparent:true,opacity:0.75});plane=new THREE.Mesh(geometry,material);scene.add(plane);renderer=new THREE.WebGLRenderer({antialias:true});renderer.setSize(sceneW,sceneH);renderer.setClearColorHex(0xffffff)
				container.appendChild(renderer.domElement);}
				function addAntiAliasing(){isNativeAntialiasing=renderer.context.getContextAttributes().antialias;nativeAntialiasSupport=(renderer.context.getParameter(renderer.context.SAMPLES)==0)?false:true;if(!nativeAntialiasSupport){var nativeMessage=document.getElementById('anti-native');nativeMessage.parentNode.removeChild(nativeMessage);dpr=1;if(window.devicePixelRatio!==undefined)dpr=window.devicePixelRatio;renderScene=new THREE.RenderPass(scene,camera);effectFXAA=new THREE.ShaderPass(THREE.FXAAShader);effectFXAA.uniforms['resolution'].value.set(1/(sceneW*dpr),1/(sceneH*dpr));effectFXAA.renderToScreen=true;composer=new THREE.EffectComposer(renderer);composer.setSize(window.innerWidth*dpr,window.innerHeight*dpr);composer.addPass(renderScene);composer.addPass(effectFXAA);}else{var postMessage=document.getElementById('anti-post');postMessage.parentNode.removeChild(postMessage);}}
				var buildCheckbox=function(){if(!nativeAntialiasSupport){document.getElementById('dis').style.display="none";var checkbox=document.getElementById('post-check');checkbox.addEventListener('click',function(){isPostProcessing=!isPostProcessing;if(isPostProcessing){document.getElementById('en').style.display="";document.getElementById('dis').style.display="none";}else{document.getElementById('en').style.display="none";document.getElementById('dis').style.display="";}},false);}};var animate=function(){boxSmall.rotation.y+=0.002;boxLarge.rotation.x=Math.sin(Date.now()/1000)/20;boxLarge.rotation.y+=0.001;plane.rotation.z=Math.sin(Date.now()/1000)/20;if(!nativeAntialiasSupport&&isPostProcessing==true){composer.render();}else{renderer.render(scene,camera);}
				requestAnimationFrame(animate);}
				var onWindowResize=function(){sceneW=container.offsetWidth;sceneH=container.offsetHeight;camera.aspect=sceneW/sceneH;camera.updateProjectionMatrix();if(!nativeAntialiasSupport){effectFXAA.uniforms['resolution'].value.set(1/(sceneW*dpr),1/(sceneH*dpr));composer.setSize(sceneW*dpr,sceneH*dpr);}
				renderer.setSize(sceneW,sceneH);}
				window.addEventListener('resize',onWindowResize,false);var hasWebGL=(function(){try{return!!window.WebGLRenderingContext&&!!document.createElement('canvas').getContext('experimental-webgl');}catch(e){return false;}})();if(hasWebGL){init();addAntiAliasing();buildCheckbox();animate();}else{container.innerHTML='<img src="/static/images/tutorials/casestudies/roll-it/need-computer.png" class="rollit-full">';container.classList.add('no-webgl');var nativeMessage=document.getElementById('anti-native');nativeMessage.parentNode.removeChild(nativeMessage);var postMessage=document.getElementById('anti-post');postMessage.parentNode.removeChild(postMessage);}})();</script>
				<pre class="prettyprint"><span class="com">// check for native platform antialias support via the THREE renderer</span><span class="pln">
				</span><span class="com">// from: http://codeflow.org/entries/2013/feb/22/how-to-write-portable-webgl/#antialiasing</span><span class="pln">
				</span><span class="kwd">var</span><span class="pln"> nativeAntialiasSupport </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">renderer</span><span class="pun">.</span><span class="pln">context</span><span class="pun">.</span><span class="pln">getParameter</span><span class="pun">(</span><span class="pln">renderer</span><span class="pun">.</span><span class="pln">context</span><span class="pun">.</span><span class="pln">SAMPLES</span><span class="pun">)</span><span class="pln"> </span><span class="pun">==</span><span class="pln"> </span><span class="lit">0</span><span class="pun">)</span><span class="pln"> </span><span class="pun">?</span><span class="pln"> </span><span class="kwd">false</span><span class="pln"> </span><span class="pun">:</span><span class="pln"> </span><span class="kwd">true</span><span class="pun">;</span></pre>
				<p>Here are some visual examples of <a href="/static/images/tutorials/casestudies/roll-it/antialias-native.png" target="_blank">native antialiasing</a>, <a href="/static/images/tutorials/casestudies/roll-it/antialias-shader.png" target="_blank">antialiasing via the FXAA shader</a>, and <a href="/static/images/tutorials/casestudies/roll-it/antialias-none.png" target="_blank">no antialiasing</a>. Check out the <a href="/static/demos/roll-it/roll-it-code-demos.zip">code sample download</a> to view the demo source code.</p>
				<h3 id="toc-accelerometer-based-game-controls">Accelerometer-based game controls</h3>
				<p>Much of Roll It's magic comes from the ball-rolling gesture that the player performs with a phone. Mobile devices have had access to the accelerometer within the browser for some time now, but as an industry we're just starting to explore motion-based gesture recognition on the web. We're somewhat limited by the data that the phone's accelerometer provides, but with a little creativity we can come up with some great new experiences.</p>
				<p>Detecting Roll It's main "roll" gesture starts with tracking the 10 most recent accelerometer updates that come from the window's ‘<a href="http://www.html5rocks.com/en/tutorials/device/orientation/" target="_blank">deviceorientation</a>' event. By subtracting the previous tilt value from the current tilt value, we store the angle delta between events. Then, by constantly summing up the last ten angle deltas, we can detect continuous rotation as the phone moves through space. When the phone passes a threshold of sweeping angle change, we trigger a roll. Then, by finding the largest single tilt delta in that sweep, we can estimate a speed for the ball. In Roll It, this speed is normalized using timestamps that we attach to each accelerometer update. This helps smooth out the variable speed in which accelerometer updates stream into the browser on different devices.</p>
				<p>
					<div id="scene">
						<div id="swing-up"><span></span></div>
						<div id="swing-down"><span></span></div>
						<div id="divider"></div>
					</div>
				</p>
				<p></p>
				<script>(function(){var getVendorPrefix=function(propertySuffix){var vendors=['Moz','Webkit','O','ms'];var element=document.getElementsByTagName('div')[0];for(var vendor in vendors){if(element.style[vendors[vendor]+propertySuffix]!==undefined){return vendors[vendor];}}
				return null;};var curVendor=getVendorPrefix('Transform');var transformProp=curVendor+'Transform';function ValueBuffer(numSamples){this.numSamples=numSamples;this.initBuffer();};ValueBuffer.prototype.initBuffer=function(){this.sampleIndex=0;this.buffer=[];for(var i=0;i<this.numSamples;i++)this.buffer.push(0);};ValueBuffer.prototype.update=function(value){this.sampleIndex++;if(this.sampleIndex==this.numSamples)this.sampleIndex=0;this.buffer[this.sampleIndex]=value;};ValueBuffer.prototype.sum=function(){var sum=0;for(var i=0;i<this.numSamples;i++){sum+=this.buffer[i];}
				return sum;};ValueBuffer.prototype.sumPos=function(){var sum=0;for(var i=0;i<this.numSamples;i++){if(this.buffer[i]>0)sum+=this.buffer[i];}
				return sum;};ValueBuffer.prototype.sumNeg=function(){var sum=0;for(var i=0;i<this.numSamples;i++){if(this.buffer[i]<0)sum+=this.buffer[i];}
				return sum;};var tiltZAxis=0;var tiltXAxis=0;var compass=0;var updateOrientation=function(e){tiltZAxis=parseFloat(e.gamma);tiltXAxis=parseFloat(e.beta);compass=parseFloat(e.alpha);updateRollGesture(tiltXAxis);};window.addEventListener('deviceorientation',updateOrientation,false);setTimeout(function(){if((isNaN(tiltZAxis)&&isNaN(tiltXAxis))||(tiltZAxis==0&&tiltXAxis==0)){scene.innerHTML='<img src="http://www.html5rocks.com/static/images/tutorials/casestudies/roll-it/need-phone.png" class="rollit-full">';scene.classList.add('no-accel');}},1000);var swingUp=document.getElementById('swing-up');var swingUpValue=swingUp.getElementsByTagName('span')[0];var swingDown=document.getElementById('swing-down');var swingDownValue=swingDown.getElementsByTagName('span')[0];var scene=document.getElementById('scene');var tiltBuffer=new ValueBuffer(10);var lastTiltValue=0;var updateRollGesture=function(tilt){var tiltDelta=tilt-lastTiltValue;tiltBuffer.update(tiltDelta);lastTiltValue=tilt;swingUp.style.height=tiltBuffer.sumPos()+'px';swingUpValue.innerHTML=Math.round(tiltBuffer.sumPos())+'&deg;';swingDown.style.height=-tiltBuffer.sumNeg()+'px';swingDownValue.innerHTML=Math.round(tiltBuffer.sumNeg())+'&deg;';if(tiltBuffer.sumPos()>=100){scene.classList.add('roll');}else{scene.classList.remove('roll');}};})();</script>
				<h3 id="toc-websockets-communication">WebSockets communication</h3>
				<p>Once the player rolls the ball with their phone, a message is sent from the phone to the laptop telling it to launch the ball. This "roll" message is sent via a <a href="http://en.wikipedia.org/wiki/JSON" target="_blank">JSON</a> data object through a <a href="http://en.wikipedia.org/wiki/WebSocket" target="_blank">WebSocket</a> connection between the two machines. The JSON data is small, mainly consisting of a message type, throw speed, and aim direction. </p>
				<pre class="prettyprint"><span class="pun">{</span><span class="pln">type</span><span class="pun">:</span><span class="pln"> </span><span class="str">"device:ball-thrown"</span><span class="pun">,</span><span class="pln"> speed</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.5</span><span class="pun">,</span><span class="pln"> aim</span><span class="pun">:</span><span class="pln"> </span><span class="lit">0.1</span><span class="pun">}</span></pre>
				<p>All of the communication between the laptop and phone happens via small JSON messages like this. Every time the game updates its state on the desktop, or the user tilts or taps a button on the phone, a WebSocket message is transmitted between the machines. In order to keep this communication simple and easy to manage, the WebSockets messages are broadcast using a single exit point from either browser. Conversely, there's a single entry point on the receiving browser, with one WebSocket object handling all incoming and outgoing messages on both ends. When a WebSocket message is received, the JSON data is rebroadcast within the JavaScript app using jQuery's trigger() method. At this point, the incoming data behaves just like any other custom DOM event, and can be picked up and processed by any other object in the application. </p>
				<pre class="prettyprint"><span class="kwd">var</span><span class="pln"> websocket </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">new</span><span class="pln"> </span><span class="typ">WebSocket</span><span class="pun">(</span><span class="pln">serverIPAddress</span><span class="pun">);</span><span class="pln">

				</span><span class="com">// rebroadcast incoming WebSocket messages with a global event via jQuery</span><span class="pln">
				websocket</span><span class="pun">.</span><span class="pln">onmessage </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">e</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
				  </span><span class="kwd">if</span><span class="pln"> </span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">data</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
				    </span><span class="kwd">var</span><span class="pln"> obj </span><span class="pun">=</span><span class="pln"> JSON</span><span class="pun">.</span><span class="pln">parse</span><span class="pun">(</span><span class="pln">e</span><span class="pun">.</span><span class="pln">data</span><span class="pun">);</span><span class="pln">
				    $</span><span class="pun">(</span><span class="pln">document</span><span class="pun">).</span><span class="pln">trigger</span><span class="pun">(</span><span class="pln">data</span><span class="pun">.</span><span class="pln">type</span><span class="pun">,</span><span class="pln"> obj</span><span class="pun">);</span><span class="pln">
				  </span><span class="pun">}</span><span class="pln">
				</span><span class="pun">};</span><span class="pln">

				</span><span class="com">// broadcast outgoing WebSocket messages by passing in a native .js object</span><span class="pln">
				</span><span class="kwd">var</span><span class="pln"> broadcast </span><span class="pun">=</span><span class="pln"> </span><span class="kwd">function</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">)</span><span class="pln"> </span><span class="pun">{</span><span class="pln">
				  websocket</span><span class="pun">.</span><span class="pln">send</span><span class="pun">(</span><span class="pln">JSON</span><span class="pun">.</span><span class="pln">stringify</span><span class="pun">(</span><span class="pln">obj</span><span class="pun">));</span><span class="pln">
				</span><span class="pun">};</span></pre>
				<p>Roll It's WebSocket servers are created on-the-fly when two devices are synced with a game code. The backend for Roll It was built on the <a href="https://cloud.google.com/products/compute-engine" target="_blank">Google Compute Engine</a> and <a href="https://developers.google.com/appengine/" target="_blank">App Engine</a> platform using <a href="https://code.google.com/p/go/" target="_blank">Go</a>.</p>
				<h3 id="toc-tilting-menu-screens">Tilting menu screens</h3>
				<p>Beyond the event-driven WebSocket messages used during gameplay, the menus in Roll It are controlled by tilting the phone and tapping a button to confirm a selection. This requires a more consistent stream of tilt data transmitting from the phone to the laptop. In order to reduce bandwidth and avoid sending unnecessary updates, these messages are only sent if the device's tilt has changed by more than a couple of degrees. There's no point in sending a stream of tilt data if the phone is lying flat on a table! The rate of transmission is also throttled - no more than 15 WebSockets messages are sent per second in Roll It, even if the device is actively being tilted. </p>
				<p>Once the tilt values are picked up on the computer, they're interpolated over time using <a href="http://updates.html5rocks.com/2012/05/requestAnimationFrame-API-now-with-sub-millisecond-precision" target="_blank">requestAnimationFrame</a> to keep a smooth feel. The end result is a rotating menu and a ball that rolls to help indicate the user's selection. As the phone sends tilt data, these DOM elements are updated in real time by recalculating a CSS transform inside of the requestAnimationFrame loop. The menu's container simply rotates, but the ball seems to roll along the floor. To achieve this effect, we implement some basic trigonometry to relate the balls x-coordinate to its rotation. The simple equation is: rotations = x / (diameter * π)</p>
				<p>
				</p><div id="roll-menu" style="-webkit-transform: rotate(0deg);">
				<div id="ball-track">
				<img id="ball" width="77" height="77" src="data:image/png;base64,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" style="-webkit-transform: translate3d(0px, 0px, 0px) rotate(0deg);">
				</div>
				<div id="floor"></div>
				</div>
				<p></p>
				<script>(function(){var getVendorPrefix=function(propertySuffix){var vendors=['Moz','Webkit','O','ms'];var element=document.getElementsByTagName('div')[0];for(var vendor in vendors){if(element.style[vendors[vendor]+propertySuffix]!==undefined){return vendors[vendor];}}
				return null;};var curVendor=getVendorPrefix('Transform');var transformProp=curVendor+'Transform';var ball=document.getElementById('ball');var scene=document.getElementById('roll-menu');var diameter=ball.width;var radius=diameter/2;var circumference=Math.PI*diameter;var sceneRotation=0;var ballRotation=0;var numRotations=0;var mouseX=0;function mouseMoved(e){var x=(e.touches)?e.touches[0].clientX:e.clientX;mouseX=x-Math.round(window.innerWidth/2);}
				document.addEventListener('mousemove',mouseMoved,false);document.addEventListener('touchmove',mouseMoved,false);var lockTouchScreen=function(isLocked){(isLocked==false)?document.ontouchmove=null:document.ontouchmove=function(e){e.preventDefault();};};scene.addEventListener('touchstart',function(e){lockTouchScreen(true);},false);document.addEventListener('touchend',function(e){lockTouchScreen(false);},false);ball.onmousedown=function(e){return false;};var render=function(){sceneRotation=mouseX/40;numRotations=(mouseX/circumference);ballRotation=360*numRotations;ball.style[transformProp]='translate3d('+mouseX+'px, 0, 0) rotate('+ballRotation+'deg)';scene.style[transformProp]='rotate('+sceneRotation+'deg)';requestAnimationFrame(render);};requestAnimationFrame(render);})();</script>
				<h2 id="toc-wrap-up">Wrap up</h2>
				<p>Roll It is a sign of the times. Between the open source projects that powered its development, the processing power of the devices on our desks and in our pockets, and the state of the web as a platform, it's a truly exciting and transformative time to be connected on the open web. Just a few years ago, much of this technology only existed in proprietary systems, unavailable to freely use and distribute. Today, complex experiences can be realized with less work and more imagination as we create and share new pieces of the puzzle every day. So, what are you waiting for? Build something great and share it with the world!</p>
				<p>
				</p><figure>
				<a href="http://g.co/rollit" target="_blank">
				<img pagespeed_lazy_src="http://1-ps.googleusercontent.com/x/s.html5rocks-hrd.appspot.com/www.html5rocks.com/static/images/tutorials/casestudies/roll-it/roll-it-logo.png.pagespeed.ce.uK310OtBbl.png" width="376" height="64" src="//1-ps.googleusercontent.com/h/www.gstatic.com/psa/static/1.gif" onload="pagespeed.lazyLoadImages.loadIfVisible(this);" pagespeed_lazy_replaced_functions="1">
				</a>
				</figure>
				<p></p>
				<h2 id="toc-downloads">Downloads</h2>
				<a href="/static/demos/roll-it/roll-it-code-demos.zip" target="_blank" class="button-download">Download the code examples</a>
			</section>
		</article>
	</div>
</div>

<script pagespeed_no_defer="">(function(){var e=window,f=Math,g="round",h="",q="&abt=",x="&act=",y="&adt=",z="&afd=",A="&attfb=",B="&mfd=",C="&nbt=",D="&nct=",E="&ndt=",F="&nfd=",G="&nttfb=",H="&rit_css=",I="&rit_img=",J="&rit_link=",K="&rit_script=";e.pagespeed=e.pagespeed||{};var L=e.pagespeed;
L.getResourceTimingData=function(){if(e.performance&&e.performance.webkitGetEntries){for(var r=0,s=0,k=0,t=0,l=0,u=0,m=0,v=0,n=0,w=0,p=0,c={},d=e.performance.webkitGetEntries(),b=0;b<d.length;b++){var a=d[b].duration;0<a&&(r+=a,++k,s=f.max(s,a));a=d[b].connectEnd-d[b].connectStart;0<a&&(u+=a,++m);a=d[b].domainLookupEnd-d[b].domainLookupStart;0<a&&(t+=a,++l);a=d[b].initiatorType;c[a]?++c[a]:c[a]=1;a=d[b].requestStart-d[b].fetchStart;0<a&&(w+=a,++p);a=d[b].responseStart-d[b].requestStart;0<a&&(v+=a,
++n)}return z+(k?f[g](r/k):0)+F+k+B+f[g](s)+x+(m?f[g](u/m):0)+D+m+y+(l?f[g](t/l):0)+E+l+q+(p?f[g](w/p):0)+C+p+A+(n?f[g](v/n):0)+G+n+(c.css?H+c.css:h)+(c.link?J+c.link:h)+(c.script?K+c.script:h)+(c.img?I+c.img:h)}return h};L.getResourceTimingData=L.getResourceTimingData;})();
(function(){var c=encodeURIComponent,f=window,h="performance",k="",l="&",m="&b_csi=",n="&bci=",p="&cces=",r="&ccis=",s="&ccos=",t="&ccrl=",u="&ccul=",v="&connect=",w="&dns=",x="&dom_c=",y="&dwld=",z="&fp=",A="&htmlAt=",B="&ifr=0",C="&ifr=1",D="&nav=",E="&nrp=",F="&nt=",G="&r",H="&ref=",I="&req_start=",J="&ttfb=",K="&url=",L="=",M="?",N="EventStart",O="beforeunload",P="ets=",Q="load",R="load:",S="on",T="unload:";f.pagespeed=f.pagespeed||{};
var U=f.pagespeed,V=function(a,d,b,e,g){this.e=a;this.a=d;this.b=b;this.f=g;this.c=e};U.beaconUrl=k;
V.prototype.d=function(){var a=this.e,d=f.mod_pagespeed_start,b=Number(new Date)-d,a=a+(-1==a.indexOf(M)?M:l),a=a+P+(this.a==Q?R:T),a=a+b;if(this.a!=O||!f.mod_pagespeed_loaded){a+=G+this.a+L;if(f[h]){var b=f[h].timing,e=b.navigationStart,g=b.requestStart,a=a+(b[this.a+N]-e),a=a+(D+(b.fetchStart-e)),a=a+(w+(b.domainLookupEnd-b.domainLookupStart)),a=a+(v+(b.connectEnd-b.connectStart)),a=a+(I+(g-e)),a=a+(J+(b.responseStart-g)),a=a+(y+(b.responseEnd-b.responseStart)),a=a+(x+(b.domContentLoadedEventStart-
e));f[h].navigation&&(a+=F+f[h].navigation.type);e=-1;b.msFirstPaint?e=b.msFirstPaint:f.chrome&&f.chrome.loadTimes&&(e=Math.floor(1E3*f.chrome.loadTimes().firstPaintTime));-1!=e&&(a+=z+(e-g))}else a+=b;U.getResourceTimingData&&f.parent==f&&(a+=U.getResourceTimingData());a+=f.parent!=f?C:B;this.a==Q&&(f.mod_pagespeed_loaded=!0,(b=f.mod_pagespeed_num_resources_prefetched)&&(a+=E+b),(b=f.mod_pagespeed_prefetch_start)&&(a+=A+(d-b)));U.panelLoader&&(d=U.panelLoader.getCsiTimingsString(),d!=k&&(a+=m+d),
d=U.panelLoader.getCriticalImagesInfoString(),d!=k&&(a+=n+d));U.criticalCss&&(d=U.criticalCss,a+=r+d.total_critical_inlined_size+p+d.total_original_external_size+s+d.total_overhead_size+t+d.num_replaced_links+u+d.num_unreplaced_links);this.b!=k&&(a+=this.b);this.c!=k&&(a+=H+c(this.c));a+=K+c(this.f);U.beaconUrl=a;(new Image).src=a}};U.g=function(a,d,b,e,g){var q=new V(a,d,b,e,g);f.addEventListener?f.addEventListener(d,function(){q.d()},!1):f.attachEvent(S+d,function(){q.d()})};
U.addInstrumentationInit=U.g;})();

pagespeed.addInstrumentationInit('http://1-ps.googleusercontent.com/beacon?org=98_1_vo', 'load', '&ft=1499&s_ttfb=15', '', 'http://www.html5rocks.com/en/tutorials/casestudies/roll-it/');</script>

</body>
</html>